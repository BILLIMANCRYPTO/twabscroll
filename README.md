## TWAB Scroll Analysis Script

### Описание

Этот скрипт предназначен для анализа баланса кошельков в сети Scroll на определенную дату и вычисления Time-Weighted Average Balance (TWAB) для заданного периода времени. Скрипт использует несколько RPC-узлов для ускорения процесса обработки, распределяя нагрузку и выполняя запросы параллельно.

Советую брать rpc с [blast.io](https://blastapi.io/)

### Как работает скрипт

1. **Чтение адресов кошельков**:
   Скрипт читает адреса кошельков из файла `wallets.txt` и преобразует их в checksummed формат.

2. **Инициализация Web3**:
   Подключается к нескольким RPC-узлам для сети Scroll и проверяет соединение с каждым из них.

3. **Обработка каждого кошелька**:
   - Для каждого кошелька создается пул потоков, который обрабатывает запросы на получение балансов параллельно (по 3 запроса одновременно).
   - Для каждого кошелька рассчитывается суммарный баланс за каждый день в заданном периоде.
   - Результаты кешируются для последующего использования, чтобы избежать повторных запросов.

4. **Параллельная обработка кошельков**:
   - Кошельки добавляются в очередь задач.
   - Создается пул воркеров, распределяющий задачи между несколькими RPC-узлами (по 5 потоков на каждый узел).

5. **Запись результатов**:
   - После завершения обработки всех кошельков результаты записываются в CSV-файл `twab_results.csv`.

### Как использовать

1. Установите необходимые зависимости:

```sh
pip install web3 tqdm
```

2. Создайте файл `wallets.txt` и добавьте в него адреса кошельков, которые вы хотите проанализировать (каждый адрес на новой строке).

3. Запустите скрипт:

```sh
python main.py
```

### Пример файла wallets.txt

```
0x1234567890abcdef1234567890abcdef12345678
0xabcdef1234567890abcdef1234567890abcdef12
...
```
